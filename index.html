<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ê°€ë¬¸ RPG â€“ ì‹œì¡°ì˜ ê¸°ë¡</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-zinc-900 text-zinc-100 min-h-screen flex flex-col">
  <!-- Header -->
  <header class="bg-zinc-950 border-b border-zinc-800">
    <div class="max-w-3xl mx-auto px-4 py-4 flex items-center justify-between gap-3">
      <div class="min-w-0">
        <h1 class="text-xl font-bold text-amber-300 truncate">ğŸ“œ ê°€ë¬¸ RPG â€“ ì‹œì¡°ì˜ ê¸°ë¡</h1>
        <p class="text-xs text-zinc-400">í…ìŠ¤íŠ¸ ê¸°ë°˜ ê°€ë¬¸ ë¡œê·¸ë¼ì´í¬</p>
      </div>
      <div class="flex items-center gap-2 shrink-0">
        <button id="btnNew" class="text-sm border border-zinc-700 px-3 py-1.5 rounded hover:bg-zinc-800">ìƒˆ ê°€ë¬¸</button>
        <button id="btnShareGenealogy" class="text-sm border border-amber-400 text-amber-300 px-3 py-1.5 rounded hover:bg-amber-300 hover:text-zinc-900">ì¡±ë³´ ê³µìœ </button>
      </div>
    </div>
  </header>

  <!-- Main -->
  <main class="flex-1">
    <div id="app" class="max-w-3xl mx-auto px-4 py-6"></div>
  </main>

  <!-- Footer -->
  <footer class="bg-zinc-950 border-t border-zinc-800">
    <div class="max-w-3xl mx-auto px-4 py-4 text-xs text-zinc-400 flex flex-col gap-1">
      <div>Â© 2025 Worldplay All rights reserved.</div>
      <div>ë°ì´í„°ëŠ” ë¸Œë¼ìš°ì €(ë¡œì»¬ìŠ¤í† ë¦¬ì§€)ì—ë§Œ ì €ì¥ë©ë‹ˆë‹¤.</div>
      <div class="text-zinc-500">Tip: 3ëŒ€ë§ˆë‹¤ ìš”ì•½ ì¹´ë“œê°€ ëœ¨ê³ , PNGë¡œ ì €ì¥í•  ìˆ˜ ìˆì–´ìš”.</div>
    </div>
  </footer>

<script>
/* =========================
   ì‚¬ê±´ ì¹´ë“œ: ì§„ì§œ 70ê°œ (ê°ê¸° ë‹¤ë¦„)
   risk: 0~2
========================= */
const events = [
  { text:"ê³¼ê±° ì‹œí—˜ì„ ë³¼ ê¸°íšŒê°€ ì°¾ì•„ì™”ë‹¤.", risk:1, choices:[
    {text:"ì‘ì‹œí•œë‹¤", outcome:"ë‚™ë°©í–ˆìœ¼ë‚˜ ì´ë¦„ì´ í¼ì¡Œë‹¤.", riskDelta:1},
    {text:"í¬ê¸°í•œë‹¤", outcome:"ì¡°ìš©íˆ ì‹¤ë ¥ì„ ìŒ“ì•˜ë‹¤.", riskDelta:-1}
  ]},
  { text:"ìœ ë ¥ ê°€ë¬¸ì—ì„œ í˜¼ì¸ ì œì•ˆì´ ë“¤ì–´ì™”ë‹¤.", risk:0, choices:[
    {text:"ì •ëµí˜¼ì„ íƒí•œë‹¤", outcome:"ê°€ë¬¸ ì²´ë©´ì´ ì˜¬ëë‹¤.", riskDelta:0},
    {text:"ê±°ì ˆí•˜ê³  ììœ¨í˜¼ì„ ê³ ì§‘", outcome:"ì†Œë¬¸ì€ ë‚¬ì§€ë§Œ ë§ˆìŒì€ í¸í–ˆë‹¤.", riskDelta:-1}
  ]},
  { text:"ì™•ëª…ì´ ë‚´ë ¤ì™”ë‹¤. ë…¼ë€ì˜ ì •ì±…ì— ì„œëª…í•˜ë¼ í•œë‹¤.", risk:2, choices:[
    {text:"ì„œëª…í•œë‹¤", outcome:"ì¶œì„¸í–ˆì§€ë§Œ ì›í•œì´ ë‚¨ì•˜ë‹¤.", riskDelta:2},
    {text:"ê±°ë¶€í•œë‹¤", outcome:"ëª…ë¶„ì„ ì§€ì¼°ìœ¼ë‚˜ ìœ„í—˜ì´ ì»¤ì¡Œë‹¤.", riskDelta:1}
  ]},
  { text:"ì§€ë°© ìˆ˜ë ¹ ìë¦¬ê°€ ê³µì„ì´ ë˜ì—ˆë‹¤.", risk:1, choices:[
    {text:"ì²­íƒì„ ë„£ëŠ”ë‹¤", outcome:"ìë¦¬ëŠ” ì–»ì—ˆì§€ë§Œ ë’·ë§ì´ ëŒì•˜ë‹¤.", riskDelta:2},
    {text:"ì •ê³µë²•ìœ¼ë¡œ ê¸°ë‹¤ë¦°ë‹¤", outcome:"ëŠ¦ì—ˆì§€ë§Œ í‰íŒì„ ì§€ì¼°ë‹¤.", riskDelta:-1}
  ]},
  { text:"ë°±ì„±ë“¤ì´ ì„¸ê¸ˆ ë¬¸ì œë¡œ ì†Œë€ì„ ì¼ìœ¼ì¼°ë‹¤.", risk:1, choices:[
    {text:"ê°•ê²½ ì§„ì••", outcome:"ì§ˆì„œëŠ” íšŒë³µëì§€ë§Œ ì›ì„±ì´ ìŒ“ì˜€ë‹¤.", riskDelta:2},
    {text:"íƒ€í˜‘ê³¼ êµ¬íœ¼", outcome:"ì‹ ë§ì„ ì–»ì—ˆìœ¼ë‚˜ ìƒë¶€ ëˆˆì´.", riskDelta:1}
  ]},
  { text:"ì—­ëª¨ í˜ì˜ë¡œ ì§€ì¸ì´ ì¡í˜€ê°”ë‹¤.", risk:2, choices:[
    {text:"ì—°ì„ ëŠëŠ”ë‹¤", outcome:"ì˜ì‹¬ì„ í”¼í–ˆë‹¤.", riskDelta:0},
    {text:"êµ¬ëª…ì— ë‚˜ì„ ë‹¤", outcome:"ì˜ë¦¬ëŠ” ì§€ì¼°ìœ¼ë‚˜ ìœ„í—˜í•´ì¡Œë‹¤.", riskDelta:2}
  ]},
  { text:"ê°€ë¬¸ ì¬ì‚°ì„ ë¶ˆë¦´ ê¸°íšŒê°€ ìƒê²¼ë‹¤.", risk:1, choices:[
    {text:"ê³¼ê°íˆ íˆ¬ì", outcome:"ì¬ì‚°ì´ ëŠ˜ì—ˆë‹¤.", riskDelta:1},
    {text:"ë³´ìˆ˜ì ìœ¼ë¡œ ìš´ìš©", outcome:"ì•ˆì •ì€ ì§€ì¼°ë‹¤.", riskDelta:-1}
  ]},
  { text:"ì™•ì‹¤ í–‰ì‚¬ì— ì´ˆëŒ€ë°›ì•˜ë‹¤.", risk:1, choices:[
    {text:"í™”ë ¤í•˜ê²Œ ì°¸ì„", outcome:"ëˆˆì— ë„ì—ˆì§€ë§Œ ì‹œê¸°ë„ ìƒ€ë‹¤.", riskDelta:1},
    {text:"ì¡°ìš©íˆ ì°¸ì„", outcome:"ë¬´ë‚œíˆ ë„˜ì–´ê°”ë‹¤.", riskDelta:0}
  ]},
  { text:"ìƒì†Œë¥¼ ì˜¬ë¦´ ê¸°íšŒê°€ ìƒê²¼ë‹¤.", risk:2, choices:[
    {text:"ì§ì–¸í•œë‹¤", outcome:"ëª…ì„±ì´ ì˜¬ëì§€ë§Œ ìœ„í—˜ë„ ìƒìŠ¹.", riskDelta:2},
    {text:"ì¹¨ë¬µí•œë‹¤", outcome:"ì•ˆì „í–ˆìœ¼ë‚˜ ê¸°íšŒë¥¼ ë†“ì³¤ë‹¤.", riskDelta:0}
  ]},
  { text:"í•™ë¬¸ì— ëª°ë‘í•  ì‹œê°„ì´ ìƒê²¼ë‹¤.", risk:0, choices:[
    {text:"í•™ë¬¸ì— ì „ë…", outcome:"í›„ëŒ€ì— ì´ë¦„ì„ ë‚¨ê²¼ë‹¤.", riskDelta:-1},
    {text:"ì‹¤ë¬´ë¡œ ì„±ê³¼", outcome:"ë‹¹ì¥ ê³µì ì„ ìŒ“ì•˜ë‹¤.", riskDelta:0}
  ]},
  { text:"ì •ì ì´ ê³µê°œì ìœ¼ë¡œ ëª¨í•¨í–ˆë‹¤.", risk:2, choices:[
    {text:"ë§ëŒ€ì‘", outcome:"ì‹¸ì›€ì´ ì»¤ì¡Œë‹¤.", riskDelta:2},
    {text:"ì°¸ê³  ì¦ê±°ë¥¼ ëª¨ì€ë‹¤", outcome:"ì‹œê°„ì€ ê±¸ë ¸ì§€ë§Œ íŒì´ ì‘ì•„ì¡Œë‹¤.", riskDelta:1}
  ]},
  { text:"ê°€ë¬¸ í›„ì›ì„ ìš”ì²­ë°›ì•˜ë‹¤.", risk:1, choices:[
    {text:"í›„ì›í•œë‹¤", outcome:"ì¸ë§¥ì´ ëŠ˜ì—ˆë‹¤.", riskDelta:1},
    {text:"ê±°ì ˆí•œë‹¤", outcome:"ê´€ê³„ëŠ” ì–•ì•„ì¡Œì§€ë§Œ ì•ˆì „í–ˆë‹¤.", riskDelta:0}
  ]},
  { text:"ìœ ëŠ¥í•œ ì¸ì¬ê°€ ê°€ë¬¸ ë¬¸í•˜ì— ë“¤ê³ ì í•œë‹¤.", risk:0, choices:[
    {text:"ë°›ì•„ë“¤ì¸ë‹¤", outcome:"ê°€ë¬¸ ì—­ëŸ‰ì´ ê°•í™”ëë‹¤.", riskDelta:0},
    {text:"ê²½ê³„í•˜ë©° ê±°ì ˆ", outcome:"ì•ˆì •ì€ ìœ ì§€ëìœ¼ë‚˜ ê¸°íšŒ ì†ì‹¤.", riskDelta:-1}
  ]},
  { text:"ì „ì—¼ë³‘ ì†Œë¬¸ì´ ëŒê¸° ì‹œì‘í–ˆë‹¤.", risk:1, choices:[
    {text:"í”¼ì‹ í•œë‹¤", outcome:"ë¬´ì‚¬í–ˆì§€ë§Œ ê³µë°±ì´ ìƒê²¼ë‹¤.", riskDelta:0},
    {text:"ë‚¨ì•„ êµ¬íœ¼í•œë‹¤", outcome:"ì±…ì„ì€ ë‹¤í–ˆìœ¼ë‚˜ ìœ„í—˜í•´ì¡Œë‹¤.", riskDelta:1}
  ]},
  { text:"ë¹„ë°€ ë¬¸ì„œë¥¼ ìš°ì—°íˆ ì†ì— ë„£ì—ˆë‹¤.", risk:2, choices:[
    {text:"í™œìš©í•œë‹¤", outcome:"ê¶Œë ¥ì„ ì–»ì—ˆì§€ë§Œ í‘œì ì´ ëë‹¤.", riskDelta:2},
    {text:"íŒŒê¸°í•œë‹¤", outcome:"ì–‘ì‹¬ì„ ì§€ì¼°ê³  ìœ„í—˜ì´ ì¤„ì—ˆë‹¤.", riskDelta:-1}
  ]},
  { text:"í›„ê³„ì êµìœ¡ ë°©ì¹¨ì„ ì •í•´ì•¼ í•œë‹¤.", risk:0, choices:[
    {text:"ì—„ê²©í•˜ê²Œ", outcome:"ê°•ì¸í•œ í›„ì†ì´ ìëë‹¤.", riskDelta:1},
    {text:"ììœ ë¡­ê²Œ", outcome:"ìœ ì—°í•œ ê°€ë¬¸ì´ ë˜ì—ˆë‹¤.", riskDelta:-1}
  ]},
  { text:"ì§€ë°© ë¯¼ì›ì´ ì§ì ‘ ìƒê²½í•´ ì™”ë‹¤.", risk:1, choices:[
    {text:"ì§ì ‘ í•´ê²°", outcome:"ì‹ ë¢°ë¥¼ ì–»ì—ˆë‹¤.", riskDelta:0},
    {text:"ë¶€í•˜ì—ê²Œ ìœ„ì„", outcome:"íš¨ìœ¨ì€ ì˜¬ëìœ¼ë‚˜ ë¶ˆì”¨ê°€ ë‚¨ì•˜ë‹¤.", riskDelta:1}
  ]},
  { text:"ì™¸êµ­ ì‚¬ì‹ ì´ ë¹„ë°€ ì ‘ì´‰ì„ ì œì•ˆí–ˆë‹¤.", risk:2, choices:[
    {text:"ì‘í•œë‹¤", outcome:"ìƒˆ ê°€ëŠ¥ì„±ì´ ì—´ë ¸ìœ¼ë‚˜ ìœ„í—˜ë„ ìƒìŠ¹.", riskDelta:2},
    {text:"ê±°ì ˆí•œë‹¤", outcome:"ì•ˆì „í–ˆë‹¤.", riskDelta:0}
  ]},
  { text:"ê°€ë¬¸ ë‚´ë¶€ ë¶„ìŸì´ ê²©í™”ëë‹¤.", risk:1, choices:[
    {text:"ê°•í•˜ê²Œ ì¤‘ì¬", outcome:"ì§ˆì„œëŠ” ì¡í˜”ë‹¤.", riskDelta:1},
    {text:"ì‹œê°„ì„ ë‘ê³  ë´‰í•©", outcome:"ë‹¹ì¥ì€ ì¡°ìš©í•´ì¡Œì§€ë§Œ ì°œì°œí•¨.", riskDelta:1}
  ]},
  { text:"ì€í‡´ë¥¼ ê¶Œìœ ë°›ì•˜ë‹¤.", risk:0, choices:[
    {text:"ì€í‡´í•œë‹¤", outcome:"ì¡°ìš©í•œ ë§ë…„ì„ ë³´ëƒˆë‹¤.", riskDelta:-2},
    {text:"ê±°ë¶€í•œë‹¤", outcome:"ëê¹Œì§€ ìë¦¬ë¥¼ ì§€ì¼°ë‹¤.", riskDelta:1}
  ]},
  { text:"ì‚¬í—Œë¶€ì˜ ê°ì°°ì´ ì˜ˆê³ ë˜ì—ˆë‹¤.", risk:2, choices:[
    {text:"ì¥ë¶€ë¥¼ ì •ë¦¬í•œë‹¤", outcome:"í—ˆì ì´ ì¤„ì—ˆë‹¤.", riskDelta:1},
    {text:"ì¸ë§¥ìœ¼ë¡œ ë¬´ë§ˆ", outcome:"ë‹¹ì¥ì€ ë„˜ì–´ê°”ìœ¼ë‚˜ ê¼¬ë¦¬ê°€ ê¸¸ì–´ì¡Œë‹¤.", riskDelta:2}
  ]},
  { text:"ê³¡ì‹ ì°½ê³ ì—ì„œ ë¶„ì‹¤ì´ ë°œìƒí–ˆë‹¤.", risk:1, choices:[
    {text:"ì—„ë²Œí•œë‹¤", outcome:"ì§ˆì„œëŠ” ì„°ì§€ë§Œ ì›ë§ì´ ë‚¨ì•˜ë‹¤.", riskDelta:1},
    {text:"ì†ì‹¤ì„ ë©”ìš°ê³  ê°œí˜", outcome:"ë¯¼ì‹¬ì´ ëˆ„ê·¸ëŸ¬ì¡Œë‹¤.", riskDelta:0}
  ]},
  { text:"ì„œì›ì˜ ë…¼ìŸì— ë¼ì–´ë“¤ ê¸°íšŒê°€ ìƒê²¼ë‹¤.", risk:1, choices:[
    {text:"í¸ì„ ë“ ë‹¤", outcome:"ì§€ì§€ì¸µì´ ìƒê²¼ì§€ë§Œ ì ë„ ìƒê²¼ë‹¤.", riskDelta:1},
    {text:"ì¤‘ì¬í•œë‹¤", outcome:"í° ë¶„ë€ì€ ë§‰ì•˜ë‹¤.", riskDelta:0}
  ]},
  { text:"ê°€ë¬¸ ì œì‚¬ ë¬¸ì œë¡œ ì¹œì¡±ì´ ë“¤ê³ ì¼ì–´ë‚¬ë‹¤.", risk:0, choices:[
    {text:"ì „í†µëŒ€ë¡œ", outcome:"ì²´ë©´ì€ ì§€ì¼°ë‹¤.", riskDelta:0},
    {text:"í˜„ì‹¤ì ìœ¼ë¡œ ì¡°ì •", outcome:"ë¶„ë€ì€ ë‚¬ì§€ë§Œ ë¶€ë‹´ì´ ì¤„ì—ˆë‹¤.", riskDelta:0}
  ]},
  { text:"êµ°ì—­ ë©´ì œ ì²­íƒì´ ë“¤ì–´ì™”ë‹¤.", risk:2, choices:[
    {text:"ë°›ì•„ì¤€ë‹¤", outcome:"ëˆì€ ë“¤ì–´ì™”ìœ¼ë‚˜ ìœ„í—˜í•´ì¡Œë‹¤.", riskDelta:2},
    {text:"ê±°ì ˆí•œë‹¤", outcome:"ì›ì¹™ì„ ì§€ì¼°ë‹¤.", riskDelta:0}
  ]},
  { text:"ë‡Œë¬¼ ì˜í˜¹ì´ í¼ì¡Œë‹¤.", risk:2, choices:[
    {text:"ê³ ì†Œë¡œ ë§ì„ ë‹¤", outcome:"ì‹¸ì›€ì´ ì»¤ì¡Œë‹¤.", riskDelta:2},
    {text:"ê²¸ì†íˆ ìˆ˜ìŠµ", outcome:"ë¶ˆê¸¸ì´ ì¡°ê¸ˆ ì¦ì•„ë“¤ì—ˆë‹¤.", riskDelta:1}
  ]},
  { text:"ìœ ë°°ì§€ì—ì„œ í¸ì§€ê°€ ì™”ë‹¤. ìœ„í—˜í•œ ë¶€íƒì´ ë‹´ê²¼ë‹¤.", risk:2, choices:[
    {text:"ë•ëŠ”ë‹¤", outcome:"ì˜ë¦¬ë¥¼ ì§€ì¼°ìœ¼ë‚˜ í‘œì ì´ ëë‹¤.", riskDelta:2},
    {text:"ì™¸ë©´í•œë‹¤", outcome:"ì•ˆì „í–ˆì§€ë§Œ ì£„ì±…ê°ì´ ë‚¨ì•˜ë‹¤.", riskDelta:0}
  ]},
  { text:"ë„ì ë–¼ê°€ ë“¤ë“ëŠ”ë‹¤.", risk:1, choices:[
    {text:"êµ°ì„ ë™ì›", outcome:"ì„±ê³¼ëŠ” ìˆì—ˆìœ¼ë‚˜ ì›í•œì´ ë‚¨ì•˜ë‹¤.", riskDelta:1},
    {text:"íšŒìœ ì™€ í¬ìƒ", outcome:"í”¼ëŠ” ëœ ë´¤ì§€ë§Œ ë¹„ìš©ì´ ë“¤ì—ˆë‹¤.", riskDelta:1}
  ]},
  { text:"ê°€ë¬¸ ë¬¸ì¥ì„ ìƒˆë¡œ ë§Œë“¤ìëŠ” ì œì•ˆì´ ë‚˜ì™”ë‹¤.", risk:0, choices:[
    {text:"ì±„íƒí•œë‹¤", outcome:"ì •ì²´ì„±ì´ ê°•í™”ëë‹¤.", riskDelta:0},
    {text:"ê±°ì ˆí•œë‹¤", outcome:"ì „í†µì„ ì§€ì¼°ë‹¤.", riskDelta:0}
  ]},
  { text:"ì„œê³ ì—ì„œ ê¸ˆì„œë¡œ ë¶„ë¥˜ëœ ì±…ì„ ë°œê²¬í–ˆë‹¤.", risk:2, choices:[
    {text:"ì½ê³  í™œìš©", outcome:"ì‹œì•¼ê°€ ë„“ì–´ì¡Œì§€ë§Œ ìœ„í—˜í•´ì¡Œë‹¤.", riskDelta:2},
    {text:"ë®ê³  ì‹ ê³ ", outcome:"ì‹ ì„ì„ ì–»ì—ˆì§€ë§Œ ì›ë§ë„ ìƒ€ë‹¤.", riskDelta:1}
  ]},
  { text:"ë¹„ê°€ ì¦ì•„ ìˆ˜í•´ê°€ ì˜ˆìƒëœë‹¤.", risk:1, choices:[
    {text:"ë¯¸ë¦¬ ì¹˜ìˆ˜ ê³µì‚¬", outcome:"í”¼í•´ë¥¼ ì¤„ì˜€ë‹¤.", riskDelta:0},
    {text:"ì˜ˆì‚°ì„ ì•„ë‚€ë‹¤", outcome:"ë‹¹ì¥ì€ í¸í–ˆì§€ë§Œ í›„í­í’.", riskDelta:1}
  ]},
  { text:"ì‹œì¥ ìƒì¸ë“¤ì´ ë‹¨í•©í•´ ìš”êµ¬ì„œë¥¼ ëƒˆë‹¤.", risk:1, choices:[
    {text:"ê·œì œ ê°•í™”", outcome:"í†µì œëŠ” ëì§€ë§Œ ë°˜ë°œì´ ì»¤ì¡Œë‹¤.", riskDelta:1},
    {text:"í˜‘ìƒí•œë‹¤", outcome:"íƒ€í˜‘ì ì„ ì°¾ì•˜ë‹¤.", riskDelta:0}
  ]},
  { text:"ê´€ì²­ ê¸°ë¡ì´ ë¶ˆíƒ€ ë²„ë ¸ë‹¤.", risk:1, choices:[
    {text:"ì² ì €íˆ ì¬ì •ë¦¬", outcome:"í˜¼ë€ì„ ìˆ˜ìŠµí–ˆë‹¤.", riskDelta:0},
    {text:"ì ë‹¹íˆ ë©”ìš´ë‹¤", outcome:"ë‹¹ì¥ì€ ë„˜ì–´ê°”ì§€ë§Œ êµ¬ë©ì´ ë‚¨ì•˜ë‹¤.", riskDelta:1}
  ]},
  { text:"ë¶€íŒ¨í•œ ì•„ì „ì´ ë°œê°ë˜ì—ˆë‹¤.", risk:1, choices:[
    {text:"ì—„ë²Œ", outcome:"ê¸°ê°•ì€ ì„°ë‹¤.", riskDelta:1},
    {text:"íšŒì´ˆë¦¬+ê°œí˜", outcome:"ë°˜ë°œì€ ì¤„ê³  ë³€í™”ëŠ” ë‚¨ì•˜ë‹¤.", riskDelta:0}
  ]},
  { text:"ì‹ ì„ ê´€ë¦¬ê°€ ë¶€ì„í–ˆë‹¤. ì„±ê²©ì´ ê¹Œë‹¤ë¡­ë‹¤.", risk:0, choices:[
    {text:"ë¨¼ì € ì˜ˆë¥¼ ê°–ì¶˜ë‹¤", outcome:"ê´€ê³„ê°€ ë¶€ë“œëŸ¬ì›Œì¡Œë‹¤.", riskDelta:0},
    {text:"ê±°ë¦¬ ë‘”ë‹¤", outcome:"ì¶©ëŒì€ ì—†ì—ˆì§€ë§Œ ê¸°íšŒë„ ì—†ë‹¤.", riskDelta:0}
  ]},
  { text:"ê°€ë¬¸ ì¬ì‚°ì„ ë‘˜ëŸ¬ì‹¼ ì†Œì†¡ì´ ê±¸ë ¸ë‹¤.", risk:2, choices:[
    {text:"ëê¹Œì§€ ì‹¸ìš´ë‹¤", outcome:"ì´ê²¼ì§€ë§Œ ì ì´ ìƒê²¼ë‹¤.", riskDelta:2},
    {text:"í•©ì˜í•œë‹¤", outcome:"ì†í•´ëŠ” ë´¤ìœ¼ë‚˜ í‰í™”ë¡­ë‹¤.", riskDelta:0}
  ]},
  { text:"ì§„ìƒí’ˆì´ ë§ê°€ì§„ ì±„ ë„ì°©í–ˆë‹¤.", risk:1, choices:[
    {text:"ì±…ì„ìë¥¼ ë¬¸ì±…", outcome:"ê´€ì²­ì´ ê¸´ì¥í–ˆë‹¤.", riskDelta:1},
    {text:"ì¹¨ì°©íˆ ì¬ì¡°ë‹¬", outcome:"ë¬´ë‚œíˆ ë„˜ì–´ê°”ë‹¤.", riskDelta:0}
  ]},
  { text:"ì¥í„°ì—ì„œ ìœ ì–¸ë¹„ì–´ê°€ í¼ì§€ê³  ìˆë‹¤.", risk:1, choices:[
    {text:"ì—„ê¸ˆí•œë‹¤", outcome:"ì ì í•´ì¡Œìœ¼ë‚˜ ë°˜ê°ì´ ë‚¨ì•˜ë‹¤.", riskDelta:1},
    {text:"ì‚¬ì‹¤ë¡œ ëŒ€ì‘", outcome:"ì‹ ë¢°ë¥¼ ì–»ì—ˆë‹¤.", riskDelta:0}
  ]},
  { text:"ìƒë‹¨(å•†åœ˜)ì´ íˆ¬ì ì œì•ˆì„ í–ˆë‹¤.", risk:1, choices:[
    {text:"ë°›ëŠ”ë‹¤", outcome:"ëˆì¤„ì´ ìƒê²¼ë‹¤.", riskDelta:1},
    {text:"ê±°ì ˆí•œë‹¤", outcome:"ê¸°ëŒ€ëŠ” ì¤„ì—ˆì§€ë§Œ ì•ˆì „í–ˆë‹¤.", riskDelta:0}
  ]},
  { text:"ì Šì€ ì¹œì¡±ì´ ë°©íƒ•í•´ ì†Œë¬¸ì´ ë‚¬ë‹¤.", risk:0, choices:[
    {text:"ì—„íˆ ë‹¤ìŠ¤ë¦°ë‹¤", outcome:"ê°€ë¬¸ ì²´ë©´ì„ ì§€ì¼°ë‹¤.", riskDelta:0},
    {text:"ìœ í•˜ê²Œ ëŒë³¸ë‹¤", outcome:"ê´€ê³„ëŠ” ì¢‹ì•„ì¡Œìœ¼ë‚˜ ì†Œë¬¸ì€ ë‚¨ì•˜ë‹¤.", riskDelta:0}
  ]},
  { text:"ê´€ì•„ ì•ì— ì§„ì •ì„œê°€ ì‚°ì²˜ëŸ¼ ìŒ“ì˜€ë‹¤.", risk:1, choices:[
    {text:"ì§ì ‘ ì²˜ë¦¬", outcome:"í‰íŒì´ ì˜¬ëë‹¤.", riskDelta:0},
    {text:"ì ˆì°¨ë¡œ ë°€ì–´ë„£ê¸°", outcome:"íš¨ìœ¨ì€ ì˜¬ëìœ¼ë‚˜ ì›ì„±ì´ ìŒ“ì˜€ë‹¤.", riskDelta:1}
  ]},
  { text:"ë¹„ê°€ ê·¸ì¹˜ê³  í‰ë…„ì´ ì˜ˆê³ ëœë‹¤.", risk:1, choices:[
    {text:"ë¹„ì¶•ë¯¸ë¥¼ í’€ì–´ êµ¬íœ¼", outcome:"ë¯¼ì‹¬ì„ ì–»ì—ˆë‹¤.", riskDelta:0},
    {text:"ì°½ê³ ë¥¼ ì§€í‚¨ë‹¤", outcome:"ê°€ë¬¸ì€ ì•ˆì „í–ˆìœ¼ë‚˜ ì›ë§ì´ ë‚¨ì•˜ë‹¤.", riskDelta:1}
  ]},
  { text:"ë¬¸í•˜ìƒë“¤ì´ ëŠ˜ì–´ë‚˜ê¸° ì‹œì‘í–ˆë‹¤.", risk:0, choices:[
    {text:"ì ê·¹ ìˆ˜ìš©", outcome:"ì„¸ë ¥ì´ ì»¤ì¡Œë‹¤.", riskDelta:1},
    {text:"ì„ ë³„ ìˆ˜ìš©", outcome:"ì§ˆì„ ì§€ì¼°ë‹¤.", riskDelta:0}
  ]},
  { text:"ì„œì°° í•œ ì¥: 'ì˜¤ëŠ˜ ë°¤ ëˆ„êµ°ê°€ ë„ ë…¸ë¦°ë‹¤.'", risk:2, choices:[
    {text:"ê²½í˜¸ë¥¼ ê°•í™”", outcome:"í°ì¼ì€ ë§‰ì•˜ë‹¤.", riskDelta:1},
    {text:"ì—­ìœ¼ë¡œ í•¨ì •ì„ íŒë‹¤", outcome:"ì„±ê³µí–ˆì§€ë§Œ ìœ„í—˜í•´ì¡Œë‹¤.", riskDelta:2}
  ]},
  { text:"ë™ë£Œê°€ ë¹„ë°€ì„ í„¸ì–´ë†“ì•˜ë‹¤. ë“£ê¸°ë§Œ í•´ë„ ìœ„í—˜í•˜ë‹¤.", risk:2, choices:[
    {text:"ì¹¨ë¬µì„ ì•½ì†", outcome:"ì—°ì€ ê¹Šì–´ì¡Œìœ¼ë‚˜ ìœ„í—˜ë„ ìƒìŠ¹.", riskDelta:2},
    {text:"ê±°ë¦¬ ë‘”ë‹¤", outcome:"ì•ˆì „ì€ ì§€ì¼°ë‹¤.", riskDelta:0}
  ]},
  { text:"ë„ì‹œì— í° í™”ì¬ê°€ ë‚¬ë‹¤.", risk:1, choices:[
    {text:"êµ¬í˜¸ì— ë‚˜ì„ ë‹¤", outcome:"ë¯¼ì‹¬ì´ ì˜¬ëë‹¤.", riskDelta:0},
    {text:"ì¬ì‚°ì„ ì§€í‚¨ë‹¤", outcome:"ê°€ë¬¸ì€ ì•ˆì „í–ˆìœ¼ë‚˜ ì´ë¯¸ì§€ ì†ìƒ.", riskDelta:1}
  ]},
  { text:"ìƒˆë¡œ ì˜¨ ê°ì‚¬ê°€ 'ì¥ë¶€ë¥¼ ë³´ì' í•œë‹¤.", risk:2, choices:[
    {text:"ì •ë©´ ëŒíŒŒ", outcome:"ìœ„ê¸°ëŠ” ë„˜ê²¼ë‹¤.", riskDelta:1},
    {text:"ì ‘ëŒ€ì™€ ë¡œë¹„", outcome:"ë¹ ë¥´ì§€ë§Œ ìœ„í—˜ì€ ì»¤ì¡Œë‹¤.", riskDelta:2}
  ]},
  { text:"ì‚¬ëƒ¥ ëª¨ì„ì— ì´ˆëŒ€ë°›ì•˜ë‹¤. ê±°ì ˆí•˜ë©´ ë¬´ë¡€ë‹¤.", risk:1, choices:[
    {text:"ì°¸ì„í•œë‹¤", outcome:"ê´€ê³„ê°€ ë„“ì–´ì¡Œë‹¤.", riskDelta:1},
    {text:"ë³‘ì„ í•‘ê³„ë¡œ ë¹ ì§„ë‹¤", outcome:"ë¬´ë‚œí–ˆì§€ë§Œ ê±°ë¦¬ê°ì´ ìƒê²¼ë‹¤.", riskDelta:0}
  ]},
  { text:"ë°¤ê¸¸ì— ìˆ˜ìƒí•œ ìê°€ ë”°ë¼ì˜¨ë‹¤.", risk:2, choices:[
    {text:"ë„ë§ì¹œë‹¤", outcome:"ì‚´ì•„ë‚¨ì•˜ì§€ë§Œ ì²´ë©´ ì†ìƒ.", riskDelta:1},
    {text:"ì •ë©´ëŒ€ì‘", outcome:"ì´ê²¼ì§€ë§Œ ë¶€ìƒê³¼ ì›í•œ.", riskDelta:2}
  ]},
  { text:"ê°€ë¬¸ ì¢…ì† ìë¦¬ë¥¼ ë‘˜ëŸ¬ì‹¼ ì†Œë¬¸ì´ ëˆë‹¤.", risk:1, choices:[
    {text:"ê³µì‹ì ìœ¼ë¡œ ì •ë¦¬", outcome:"ë¶„ìŸì´ ì¦ì•„ë“¤ì—ˆë‹¤.", riskDelta:0},
    {text:"ëª¨ë¥¸ ì²™", outcome:"ë¶ˆì”¨ê°€ ë‚¨ì•˜ë‹¤.", riskDelta:1}
  ]},
  { text:"ì„œë¡œ ë‹¤ë¥¸ íŒŒë²Œì´ ë‹¹ì‹ ì—ê²Œ ì„ íƒì„ ê°•ìš”í•œë‹¤.", risk:2, choices:[
    {text:"í•œìª½ì— ì„ ë‹¤", outcome:"í˜ì„ ì–»ì—ˆì§€ë§Œ ì ë„ ì–»ì—ˆë‹¤.", riskDelta:2},
    {text:"ì¤‘ë¦½ì„ ê³ ì§‘", outcome:"ì•ˆì „í–ˆìœ¼ë‚˜ ê³ ë¦½ê°.", riskDelta:1}
  ]},
  { text:"ê¶ê¶ ì†Œì‹í†µì´ 'ê¸°íšŒê°€ ìˆë‹¤'ê³  ê·€ë”í•œë‹¤.", risk:2, choices:[
    {text:"íŒŒê³ ë“ ë‹¤", outcome:"ì¶œì„¸ì˜ ë¬¸ì´ ì—´ë ¸ë‹¤.", riskDelta:2},
    {text:"ê±°ë¦¬ë¥¼ ë‘”ë‹¤", outcome:"ì¡°ìš©íˆ ì‚´ ê¸¸ì„ íƒí–ˆë‹¤.", riskDelta:0}
  ]},
  { text:"ë¬´ê³¼ ì¸ì¬ë¥¼ ì¶”ì²œí•´ ë‹¬ë¼ëŠ” ìš”ì²­ì´ ì™”ë‹¤.", risk:1, choices:[
    {text:"ì‹¤ë ¥ì ì¶”ì²œ", outcome:"ì‹ ë¢°ë¥¼ ì–»ì—ˆë‹¤.", riskDelta:0},
    {text:"ì¸¡ê·¼ ì¶”ì²œ", outcome:"ì„¸ë ¥ì€ ëŠ˜ì—ˆì§€ë§Œ ë’·ë§.", riskDelta:1}
  ]},
  { text:"ë¹„ë°€ìŠ¤ëŸ¬ìš´ ì •ë³´ìƒì´ ì ‘ê·¼í–ˆë‹¤.", risk:2, choices:[
    {text:"ê±°ë˜í•œë‹¤", outcome:"ì •ë³´ë¥¼ ì†ì— ë„£ì—ˆë‹¤.", riskDelta:2},
    {text:"ì«“ì•„ë‚¸ë‹¤", outcome:"ìœ„í—˜ì„ í”¼í–ˆë‹¤.", riskDelta:0}
  ]},
  { text:"ìœ ë ¥ ì¸ì‚¬ê°€ ìˆ ìë¦¬ë¥¼ ì œì•ˆí•œë‹¤.", risk:1, choices:[
    {text:"ë°›ì•„ì¤€ë‹¤", outcome:"ê´€ê³„ê°€ ê¹Šì–´ì¡Œë‹¤.", riskDelta:1},
    {text:"ì •ì¤‘íˆ ê±°ì ˆ", outcome:"ì•ˆì „í–ˆì§€ë§Œ ê±°ë¦¬ê°.", riskDelta:0}
  ]},
  { text:"ê°€ë¬¸ ì œì ì¤‘ í•œ ëª…ì´ í° ì‹¤ìˆ˜ë¥¼ ì €ì§ˆë €ë‹¤.", risk:1, choices:[
    {text:"ê°ì‹¸ì¤€ë‹¤", outcome:"ì¶©ì„±ì€ ì–»ì—ˆì§€ë§Œ ì†Œë¬¸ì´ ë‚¬ë‹¤.", riskDelta:1},
    {text:"ì„  ê¸‹ëŠ”ë‹¤", outcome:"ì´ë¯¸ì§€ëŠ” ì§€ì¼°ë‹¤.", riskDelta:0}
  ]},
  { text:"ê³µë‚©(ì„¸ê¸ˆ ë¬¼í’ˆ)ì´ ë¶€ì¡±í•´ì§ˆ ì¡°ì§ì´ë‹¤.", risk:1, choices:[
    {text:"ì¶”ê°€ ì§•ìˆ˜", outcome:"ì¬ì •ì€ ì±„ì› ìœ¼ë‚˜ ì›ì„±ì´ ìŒ“ì˜€ë‹¤.", riskDelta:1},
    {text:"ì§€ì¶œì„ ì¤„ì¸ë‹¤", outcome:"ë¶ˆí¸ì€ ìˆì—ˆì§€ë§Œ í­ë°œì€ ë§‰ì•˜ë‹¤.", riskDelta:0}
  ]},
  { text:"ê´€ì²­ì—ì„œ ë‹¹ì‹ ì„ í¬ìƒì–‘ìœ¼ë¡œ ì‚¼ìœ¼ë ¤ í•œë‹¤.", risk:2, choices:[
    {text:"ì¦ê±°ë¡œ ë°˜ê²©", outcome:"ìƒëŒ€ë¥¼ êº¾ì—ˆì§€ë§Œ íŒì´ ì»¤ì¡Œë‹¤.", riskDelta:2},
    {text:"ì¼ë‹¨ ë¬¼ëŸ¬ë‚¨", outcome:"ìƒì²˜ëŠ” ë‚¨ì•˜ì§€ë§Œ ì‚´ì•„ë‚¨ì•˜ë‹¤.", riskDelta:1}
  ]},
  { text:"ê°€ë¬¸ ì¥ì†ì´ ì™¸ì§€ë¡œ ë‚˜ê°€ê³  ì‹¶ì–´ í•œë‹¤.", risk:0, choices:[
    {text:"ë³´ë‚¸ë‹¤", outcome:"ì‹œì•¼ê°€ ë„“ì–´ì¡Œë‹¤.", riskDelta:0},
    {text:"ë¶™ì¡ëŠ”ë‹¤", outcome:"ì•ˆì •ì€ ì§€ì¼°ë‹¤.", riskDelta:0}
  ]},
  { text:"ì¥ë§ˆê°€ ê¸¸ì–´ ë‹¤ë¦¬ ê³µì‚¬ê°€ í•„ìš”í•˜ë‹¤.", risk:0, choices:[
    {text:"ê³µì‚¬ ì¶”ì§„", outcome:"í‰íŒì´ ì¢‹ì•„ì¡Œë‹¤.", riskDelta:0},
    {text:"ë¯¸ë£¬ë‹¤", outcome:"ë‹¹ì¥ì€ í¸í•˜ì§€ë§Œ ë¶ˆë§Œì´ ë‚¨ì•˜ë‹¤.", riskDelta:1}
  ]},
  { text:"ë°¤ë§ˆë‹¤ ìˆœì°°ì„ ê°•í™”í•´ ë‹¬ë¼ í•œë‹¤.", risk:1, choices:[
    {text:"ê°•í™”í•œë‹¤", outcome:"ì¹˜ì•ˆì€ ì¢‹ì•„ì¡Œìœ¼ë‚˜ ë¶ˆí¸ì´ ì»¤ì¡Œë‹¤.", riskDelta:1},
    {text:"í˜„ ìˆ˜ì¤€ ìœ ì§€", outcome:"ë¬´ë‚œí–ˆì§€ë§Œ ë¶ˆì•ˆì€ ë‚¨ì•˜ë‹¤.", riskDelta:0}
  ]},
  { text:"ëˆ„êµ°ê°€ 'ì„œì°° ìœ„ì¡°'ë¡œ ë‹¹ì‹ ì„ ì—®ìœ¼ë ¤ í•œë‹¤.", risk:2, choices:[
    {text:"ì„ ì œì ìœ¼ë¡œ í­ë¡œ", outcome:"ìƒëŒ€ê°€ ì£¼ì¶¤í–ˆë‹¤.", riskDelta:2},
    {text:"ì¡°ìš©íˆ ì¦ê±° ìˆ˜ì§‘", outcome:"íŒì„ ì¤„ì˜€ì§€ë§Œ ëŠ¦ì—ˆë‹¤.", riskDelta:1}
  ]},
  { text:"í›„ì›ìê°€ í° ìë¦¬ë¥¼ ì œì•ˆí•œë‹¤.", risk:2, choices:[
    {text:"ë°›ëŠ”ë‹¤", outcome:"ê¶Œë ¥ì´ ì»¤ì¡Œì§€ë§Œ ìœ„í—˜ë„ ìƒìŠ¹.", riskDelta:2},
    {text:"ì‚¬ì–‘í•œë‹¤", outcome:"ì•ˆì „í–ˆì§€ë§Œ í›„íšŒê°€ ë‚¨ëŠ”ë‹¤.", riskDelta:0}
  ]},
  { text:"ê°€ë¬¸ì˜ ì´ë¦„ì„ ë°”ê¿€ ê¸°íšŒê°€ ì™”ë‹¤.", risk:0, choices:[
    {text:"ê°œëª…í•œë‹¤", outcome:"ìƒˆ ì¶œë°œì„ ì„ ì–¸í–ˆë‹¤.", riskDelta:-1},
    {text:"ìœ ì§€í•œë‹¤", outcome:"ì „í†µì„ ì§€ì¼°ë‹¤.", riskDelta:0}
  ]},
  { text:"ì¥í„°ì— ì™¸ì§€ ìƒì¸ì´ ë“¤ì–´ì™€ ì§ˆì„œë¥¼ íë¦°ë‹¤.", risk:1, choices:[
    {text:"ì¶”ë°©í•œë‹¤", outcome:"í†µì œëŠ” ëì§€ë§Œ ì›ë§ì´ ë‚¨ì•˜ë‹¤.", riskDelta:1},
    {text:"ê·œì¹™ì„ ë§Œë“¤ê³  í—ˆìš©", outcome:"ì§ˆì„œì™€ ì´ìµì„ í•¨ê»˜ ì–»ì—ˆë‹¤.", riskDelta:0}
  ]},
  { text:"ì„œìª½ ë³€ë°©ì—ì„œ ê¸´ê¸‰ ë³´ê³ ê°€ ì˜¬ë¼ì™”ë‹¤.", risk:2, choices:[
    {text:"ì¦‰ì‹œ íŒŒê²¬", outcome:"ì„±ê³¼ëŠ” ìˆì—ˆìœ¼ë‚˜ ìœ„í—˜í•´ì¡Œë‹¤.", riskDelta:2},
    {text:"ìƒë¶€ ì§€ì‹œë¥¼ ê¸°ë‹¤ë¦¼", outcome:"ì•ˆì „í–ˆì§€ë§Œ ê³µì´ ì¤„ì—ˆë‹¤.", riskDelta:1}
  ]},
  { text:"ê°€ë¬¸ ë‚´ ë¬¸ì„œ ì •ë¦¬ ì¤‘ ìˆ¨ê²¨ì§„ ë¹šì´ ë‚˜ì™”ë‹¤.", risk:1, choices:[
    {text:"ë¹šì„ ê°šëŠ”ë‹¤", outcome:"ì²´ë©´ì„ ì§€ì¼°ë‹¤.", riskDelta:0},
    {text:"ìˆ¨ê¸´ë‹¤", outcome:"ë‹¹ì¥ì€ í¸í–ˆì§€ë§Œ ìœ„í—˜ì´ ë‚¨ì•˜ë‹¤.", riskDelta:2}
  ]},
  { text:"ì‚¬ëŒë“¤ì´ ë‹¹ì‹ ì„ 'ì²­ë ´'ì´ë¼ ë¶€ë¥¸ë‹¤. ë¶€ë‹´ìŠ¤ëŸ½ë‹¤.", risk:0, choices:[
    {text:"ë” ì—„ê²©í•´ì§„ë‹¤", outcome:"ëª…ì„±ì€ ì˜¬ëì§€ë§Œ í”¼ê³¤í•˜ë‹¤.", riskDelta:0},
    {text:"ì ë‹¹íˆ ìœ ì—°í•´ì§„ë‹¤", outcome:"ì‚´ê¸° í¸í•´ì¡Œì§€ë§Œ ì‹¤ìˆ˜ ì—¬ì§€.", riskDelta:1}
  ]},
  { text:"í•œì–‘ì—ì„œ ì‹œêµ­ì´ ìš”ë™ì¹œë‹¤ëŠ” ì†Œë¬¸ì´ ëˆë‹¤.", risk:2, choices:[
    {text:"ìƒê²½í•´ íŒì„ ë³¸ë‹¤", outcome:"ì •ë³´ë¥¼ ì–»ì—ˆì§€ë§Œ ìœ„í—˜í•´ì¡Œë‹¤.", riskDelta:2},
    {text:"ì§€ë°©ì—ì„œ ë²„í‹´ë‹¤", outcome:"ì¡°ìš©íˆ ë„˜ì–´ê°”ë‹¤.", riskDelta:1}
  ]},
  { text:"ê°€ë¬¸ ì„œê³ ì— ìƒˆë¡œìš´ ì¡±ë³´ í¸ì°¬ ì œì•ˆì´ ì™”ë‹¤.", risk:0, choices:[
    {text:"í¸ì°¬í•œë‹¤", outcome:"ì •ì²´ì„±ì´ ë‹¨ë‹¨í•´ì¡Œë‹¤.", riskDelta:0},
    {text:"ë¯¸ë£¬ë‹¤", outcome:"ë°”ë¹´ì§€ë§Œ í—ˆì „í•˜ë‹¤.", riskDelta:0}
  ]},
  { text:"ì„¸ê³¡ ìš´ì†¡ ì¤‘ ë°°ê°€ ë’¤ì§‘í˜”ë‹¤.", risk:2, choices:[
    {text:"ì±…ì„ì„ ì§„ë‹¤", outcome:"ì‹ ë¢°ëŠ” ì–»ì—ˆì§€ë§Œ ìœ„í—˜í•´ì¡Œë‹¤.", riskDelta:2},
    {text:"ìì—°ì¬í•´ë¡œ ëŒë¦°ë‹¤", outcome:"ë„˜ì–´ê°”ì§€ë§Œ ë’·ë§ì´ ë‚¨ì•˜ë‹¤.", riskDelta:1}
  ]},
  { text:"ê°€ë¬¸ì´ ì»¤ì§€ë©° í•˜ì¸ë“¤ ì‚¬ì´ì— ë¶„ë€ì´ ë‚¬ë‹¤.", risk:1, choices:[
    {text:"ê·œìœ¨ì„ ì„¸ìš´ë‹¤", outcome:"ì§ˆì„œëŠ” ì¡í˜”ë‹¤.", riskDelta:1},
    {text:"ë³µì§€ë¥¼ ëŠ˜ë¦°ë‹¤", outcome:"ì¶©ì„±ì€ ëŠ˜ì—ˆì§€ë§Œ ë¹„ìš© ì¦ê°€.", riskDelta:1}
  ]},
  { text:"ë§ˆì§€ë§‰ìœ¼ë¡œ, ì„ íƒì˜ ìˆœê°„ì´ë‹¤. ë‹¹ì‹ ì˜ ê¸¸ì„ ì •í•˜ë¼.", risk:1, choices:[
    {text:"ê¶Œë ¥ì„ ì¢‡ëŠ”ë‹¤", outcome:"ë¹›ê³¼ ê·¸ë¦¼ìê°€ í•¨ê»˜ ì™”ë‹¤.", riskDelta:2},
    {text:"ì¡°ìš©íˆ ì§€í‚¨ë‹¤", outcome:"ëª…ë§¥ì€ ì´ì–´ì¡Œë‹¤.", riskDelta:-1}
  ]}
];

// ì´ë²¤íŠ¸ê°€ ì •í™•íˆ 70ê°œì¸ì§€ ì•ˆì „ ì²´í¬
if (events.length !== 70) {
  console.warn("events length:", events.length);
}

/* =========================
   ìƒíƒœ/ì €ì¥
========================= */
let state = JSON.parse(localStorage.getItem("familyRPG")) || null;
const app = document.getElementById("app");

function save(){ localStorage.setItem("familyRPG", JSON.stringify(state)); }

document.getElementById("btnNew").addEventListener("click", resetGame);
document.getElementById("btnShareGenealogy").addEventListener("click", shareGenealogy);

function resetGame(){
  if(confirm("ì •ë§ ìƒˆ ê°€ë¬¸ì„ ì‹œì‘í• ê¹Œ? (í˜„ì¬ ê¸°ë¡ì€ ì‚¬ë¼ì§)")){
    localStorage.removeItem("familyRPG");
    state = null;
    renderStart();
  }
}

/* =========================
   ì‹œì‘ UI
========================= */
function renderStart(){
  app.innerHTML =
    "<div class='bg-zinc-800 border border-zinc-700 rounded-xl p-6'>" +
      "<h2 class='text-lg font-bold text-amber-300 mb-4'>ì‹œì¡° ê¸°ë¡</h2>" +
      "<label class='text-sm text-zinc-300'>ì‹œì¡° ì´ë¦„</label>" +
      "<input id='founder' class='w-full mt-1 mb-3 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-400' placeholder='ì´ë¦„' />" +
      "<label class='text-sm text-zinc-300'>ê°€ë¬¸ ì´ë¦„</label>" +
      "<input id='family' class='w-full mt-1 mb-3 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-400' placeholder='ê°€ë¬¸' />" +
      "<label class='text-sm text-zinc-300'>ê°€í›ˆ</label>" +
      "<input id='motto' class='w-full mt-1 mb-4 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-400' placeholder='ê°€í›ˆ í•œ ì¤„ (ì„ íƒ)' />" +
      "<button id='btnStart' class='border border-amber-400 text-amber-300 px-4 py-2 rounded-lg hover:bg-amber-300 hover:text-zinc-900'>ì‹œì‘</button>" +
    "</div>";

  document.getElementById("btnStart").addEventListener("click", startGame);
}

function startGame(){
  const f = (document.getElementById("founder").value || "").trim();
  const fam = (document.getElementById("family").value || "").trim();
  const m = (document.getElementById("motto").value || "").trim();
  if(!f || !fam) return alert("ì´ë¦„ê³¼ ê°€ë¬¸ì€ í•„ìˆ˜!");

  state = {
    family: fam,
    motto: m || "ì‚´ì•„ë‚¨ëŠ”ë‹¤",
    generation: 1,
    age: 20,
    risk: 0,
    current: f,
    genealogy: []
  };
  save();
  renderDashboard();
}

/* =========================
   ì‚¬ë§ í™•ë¥ 
========================= */
function deathChance(){
  let base = 0;
  if (state.age >= 70) base = 0.50;
  else if (state.age >= 60) base = 0.30;
  else if (state.age >= 50) base = 0.15;
  else if (state.age >= 40) base = 0.05;

  const riskBonus = state.risk * 0.03;
  const p = Math.min(0.95, base + riskBonus);
  return Math.random() < p;
}

/* =========================
   ì§„í–‰/ì„ íƒ
========================= */
let currentEventIndex = -1;

function nextEvent(){
  currentEventIndex = Math.floor(Math.random() * events.length);
  const e = events[currentEventIndex];

  let html =
    "<div class='bg-zinc-800 border border-zinc-700 rounded-xl p-6'>" +
      "<div class='flex items-start justify-between gap-3 mb-3'>" +
        "<div class='min-w-0'>" +
          "<h2 class='text-lg font-bold text-amber-300 truncate'>" + escapeHtml(state.current) + " (" + state.generation + "ëŒ€)</h2>" +
          "<p class='text-sm text-zinc-400'>ë‚˜ì´ " + state.age + " Â· ìœ„í—˜ë„ " + state.risk + "</p>" +
        "</div>" +
        "<span class='text-xs px-2 py-1 rounded bg-zinc-900 border border-zinc-700 text-zinc-300'>ìœ„í—˜ +" + e.risk + "</span>" +
      "</div>" +
      "<p class='mb-5'>" + escapeHtml(e.text) + "</p>";

  for (let i=0;i<e.choices.length;i++){
    html +=
      "<button class='w-full text-left border border-zinc-600 px-4 py-3 rounded-lg hover:bg-zinc-700 mb-2' onclick='choose(" + i + ")'>" +
        "<div class='font-medium'>" + escapeHtml(e.choices[i].text) + "</div>" +
        "<div class='text-xs text-zinc-400 mt-1'>ê²°ê³¼ëŠ” ê¸°ë¡ë˜ê³ , ì‹œê°„ì´ íë¦…ë‹ˆë‹¤</div>" +
      "</button>";
  }

  html += "</div>";
  app.innerHTML = html;
}

function choose(choiceIndex){
  const e = events[currentEventIndex];
  const c = e.choices[choiceIndex];

  state.genealogy.push({
    generation: state.generation,
    name: state.current,
    event: e.text,
    choice: c.text,
    outcome: c.outcome
  });

  state.age += 5;
  state.risk = Math.max(0, state.risk + e.risk + c.riskDelta);

  if (deathChance()) {
    renderDeath();
  } else {
    save();
    renderDashboard();
  }
}

/* =========================
   ì‚¬ë§ / ê³„ìŠ¹ / ìš”ì•½
========================= */
function renderDeath(){
  const showSummary = (state.generation % 3 === 0);

  let html =
    "<div class='bg-black border border-red-700 rounded-xl p-6'>" +
      "<h2 class='text-lg font-bold text-red-400 mb-2'>â˜  ì‚¬ë§</h2>" +
      "<p class='mb-4'>" + escapeHtml(state.current) + "ëŠ” " + state.age + "ì„¸ì— ìƒì„ ë§ˆê°í–ˆë‹¤.</p>" +
      "<p class='text-sm text-zinc-400 mb-4'>â€œê·¸ëŠ” ë‹¤ìŒ ì„ íƒì„ ë³´ì§€ ëª»í–ˆë‹¤.â€</p>";

  if (showSummary) {
    html += renderEndingSummaryBlock();
  }

  html +=
      "<div class='bg-zinc-900 border border-zinc-800 rounded-lg p-4'>" +
        "<label class='text-sm text-zinc-300'>í›„ì† ì´ë¦„</label>" +
        "<input id='heirName' class='w-full mt-1 mb-3 px-3 py-2 bg-zinc-950 border border-zinc-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-400' placeholder='í›„ì† ì´ë¦„' />" +
        "<label class='text-sm text-zinc-300'>ê°€ë¬¸ (ë§¤ë²ˆ ìˆ˜ì • ê°€ëŠ¥)</label>" +
        "<input id='heirFamily' class='w-full mt-1 mb-3 px-3 py-2 bg-zinc-950 border border-zinc-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-400' value='" + escapeAttr(state.family) + "' />" +
        "<label class='text-sm text-zinc-300'>ê°€í›ˆ (ë§¤ë²ˆ ìˆ˜ì • ê°€ëŠ¥)</label>" +
        "<input id='heirMotto' class='w-full mt-1 mb-4 px-3 py-2 bg-zinc-950 border border-zinc-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-400' value='" + escapeAttr(state.motto) + "' />" +
        "<button id='btnHeir' class='border border-amber-400 text-amber-300 px-4 py-2 rounded-lg hover:bg-amber-300 hover:text-zinc-900'>í›„ì†ì˜ ì‚¶ì„ ì‹œì‘í•œë‹¤</button>" +
      "</div>" +
    "</div>";

  app.innerHTML = html;

  document.getElementById("btnHeir").addEventListener("click", startHeir);
  const heirInput = document.getElementById("heirName");
  heirInput.focus();
  heirInput.addEventListener("keydown", function(ev){
    if(ev.key === "Enter") startHeir();
  });
}

function startHeir(){
  const heir = (document.getElementById("heirName").value || "").trim();
  const fam = (document.getElementById("heirFamily").value || "").trim();
  const mot = (document.getElementById("heirMotto").value || "").trim();
  if(!heir || !fam) return alert("í›„ì† ì´ë¦„ê³¼ ê°€ë¬¸ì€ í•„ìˆ˜!");

  state.current = heir;
  state.family = fam;
  state.motto = mot || state.motto;
  state.generation += 1;
  state.age = 20;
  state.risk = Math.floor(state.risk / 2);

  save();
  renderDashboard();
}

function renderEndingSummaryBlock(){
  const summary = computeSummary();
  // ìš”ì•½ í…ìŠ¤íŠ¸ëŠ” PNGì—ë„ ê·¸ëŒ€ë¡œ ì“°ì„
  let html =
    "<div class='bg-zinc-900 border border-amber-500 rounded-xl p-4 mb-4'>" +
      "<div class='flex items-start justify-between gap-3'>" +
        "<div>" +
          "<h3 class='text-amber-300 font-bold'>ğŸ“œ ê°€ë¬¸ ìš”ì•½ (" + state.generation + "ëŒ€)</h3>" +
          "<p class='text-sm text-zinc-300 mt-1'>" + escapeHtml(summary.line1) + "</p>" +
          "<p class='text-sm text-zinc-300'>" + escapeHtml(summary.line2) + "</p>" +
        "</div>" +
        "<span class='text-xs px-2 py-1 rounded bg-zinc-950 border border-zinc-700 text-zinc-300'>" + escapeHtml(summary.type) + "</span>" +
      "</div>" +
      "<div class='mt-3 flex flex-wrap gap-2'>" +
        "<button id='btnSummaryShare' class='text-sm border border-zinc-600 px-3 py-1.5 rounded hover:bg-zinc-800'>ğŸ“¤ ìš”ì•½ í…ìŠ¤íŠ¸</button>" +
        "<button id='btnSummaryPng' class='text-sm border border-amber-400 text-amber-300 px-3 py-1.5 rounded hover:bg-amber-300 hover:text-zinc-900'>ğŸ–¼ PNG ìƒì„±</button>" +
      "</div>" +
      "<p class='text-xs text-zinc-500 mt-2'>PNGëŠ” ìë™ ìƒì„± í›„ ë‹¤ìš´ë¡œë“œ ë§í¬ê°€ ëœ¹ë‹ˆë‹¤.</p>" +
      "<div id='pngOut' class='mt-3'></div>" +
    "</div>";

  // ì´ë²¤íŠ¸ ë°”ì¸ë”©ì€ ë Œë” í›„ì— ë¶™ì„(ì‚¬ë§ í™”ë©´ì—ì„œë§Œ)
  setTimeout(function(){
    const btnShare = document.getElementById("btnSummaryShare");
    const btnPng = document.getElementById("btnSummaryPng");
    if(btnShare) btnShare.addEventListener("click", shareEndingText);
    if(btnPng) btnPng.addEventListener("click", generateEndingPng);
  }, 0);

  return html;
}

function computeSummary(){
  // ì•„ì£¼ ë‹¨ìˆœí•œ ì„±í–¥ íŒì •(ë‚˜ì¤‘ì— ë” ê³ ê¸‰í™” ê°€ëŠ¥)
  const avgRisk = state.genealogy.length ? Math.round(state.risk / Math.max(1, state.generation)) : 0;
  let type = "ê· í˜•í˜• ê°€ë¬¸";
  if (state.risk >= 12) type = "ê¶Œëª¨ìˆ ìˆ˜í˜• ê°€ë¬¸";
  else if (state.risk <= 2) type = "ìƒì¡´ ìµœì í™”í˜• ê°€ë¬¸";
  else if (avgRisk >= 4) type = "ë¶ˆê½ƒì§„ì••í˜• ê°€ë¬¸";
  else if (avgRisk <= 1) type = "ì€ë‘”ìˆ˜ì–‘í˜• ê°€ë¬¸";

  const line1 = state.family + " ê°€ë¬¸ì€ " + state.generation + "ëŒ€ì— ê±¸ì³ ì—­ì‚¬ë¥¼ ì´ì–´ì™”ë‹¤.";
  const line2 = "ê°€í›ˆ: \"" + state.motto + "\" Â· í˜„ì¬ ìœ„í—˜ë„ " + state.risk;
  return { type, line1, line2 };
}

function shareEndingText(){
  const s = computeSummary();
  const text = "ğŸ“œ ê°€ë¬¸ ìš”ì•½\n" +
    "ê°€ë¬¸: " + state.family + "\n" +
    "ì„¸ëŒ€: " + state.generation + "ëŒ€\n" +
    "ê°€í›ˆ: " + state.motto + "\n" +
    "ì„±í–¥: " + s.type + "\n" +
    s.line1 + "\n" + s.line2;

  if (navigator.share) navigator.share({ title:"ê°€ë¬¸ ìš”ì•½", text:text });
  else fallbackCopy(text);
}

/* =========================
   PNG ì´ë¯¸ì§€ ìƒì„± (Canvas)
========================= */
function generateEndingPng(){
  const s = computeSummary();

  const W = 900, H = 500;
  const canvas = document.createElement("canvas");
  canvas.width = W; canvas.height = H;
  const ctx = canvas.getContext("2d");

  // ë°°ê²½
  ctx.fillStyle = "#0f0f10";
  ctx.fillRect(0,0,W,H);

  // ì¹´ë“œ
  const pad = 40;
  ctx.fillStyle = "#18181b";
  roundRect(ctx, pad, pad, W-pad*2, H-pad*2, 24, true, false);

  // ì¢Œì¸¡ ê³¨ë“œ ë°”
  ctx.fillStyle = "#fbbf24";
  roundRect(ctx, pad, pad, 10, H-pad*2, 10, true, false);

  // ì œëª©
  ctx.fillStyle = "#fbbf24";
  ctx.font = "bold 34px system-ui, -apple-system, sans-serif";
  ctx.fillText("ê°€ë¬¸ RPG Â· ìš”ì•½", pad + 28, pad + 70);

  // ë³¸ë¬¸
  ctx.fillStyle = "#e4e4e7";
  ctx.font = "28px system-ui, -apple-system, sans-serif";
  ctx.fillText("ê°€ë¬¸: " + state.family, pad + 28, pad + 140);
  ctx.fillText("ì„¸ëŒ€: " + state.generation + "ëŒ€", pad + 28, pad + 190);

  ctx.font = "24px system-ui, -apple-system, sans-serif";
  wrapText(ctx, "ê°€í›ˆ: \"" + state.motto + "\"", pad + 28, pad + 250, W - (pad + 60), 34);

  // ì„±í–¥ ë°°ì§€ ëŠë‚Œ
  ctx.fillStyle = "#0b0b0c";
  roundRect(ctx, pad + 28, pad + 330, 260, 56, 16, true, false);
  ctx.fillStyle = "#fbbf24";
  ctx.font = "bold 22px system-ui, -apple-system, sans-serif";
  ctx.fillText(s.type, pad + 46, pad + 366);

  // í•˜ë‹¨
  ctx.fillStyle = "#a1a1aa";
  ctx.font = "20px system-ui, -apple-system, sans-serif";
  ctx.fillText("ê¸°ë¡ì€ ë¸Œë¼ìš°ì €ì— ì €ì¥ë©ë‹ˆë‹¤ Â· ê³µìœ ìš© ìë™ ìƒì„±", pad + 28, H - pad - 30);

  const dataUrl = canvas.toDataURL("image/png");

  const out = document.getElementById("pngOut");
  if (out) {
    out.innerHTML =
      "<div class='flex flex-col gap-2'>" +
        "<a class='inline-flex items-center gap-2 text-sm border border-zinc-600 px-3 py-2 rounded hover:bg-zinc-800 w-fit' download='family_summary.png' href='" + dataUrl + "'>" +
          "â¬‡ï¸ PNG ë‹¤ìš´ë¡œë“œ" +
        "</a>" +
        "<img class='rounded-lg border border-zinc-700 max-w-full' alt='summary' src='" + dataUrl + "' />" +
      "</div>";
  } else {
    window.open(dataUrl, "_blank");
  }
}

function roundRect(ctx, x, y, w, h, r, fill, stroke){
  if (w < 2*r) r = w/2;
  if (h < 2*r) r = h/2;
  ctx.beginPath();
  ctx.moveTo(x+r, y);
  ctx.arcTo(x+w, y, x+w, y+h, r);
  ctx.arcTo(x+w, y+h, x, y+h, r);
  ctx.arcTo(x, y+h, x, y, r);
  ctx.arcTo(x, y, x+w, y, r);
  ctx.closePath();
  if (fill) ctx.fill();
  if (stroke) ctx.stroke();
}

function wrapText(ctx, text, x, y, maxWidth, lineHeight){
  const words = text.split(" ");
  let line = "";
  for (let i=0;i<words.length;i++){
    const test = line + words[i] + " ";
    if (ctx.measureText(test).width > maxWidth && i > 0){
      ctx.fillText(line, x, y);
      line = words[i] + " ";
      y += lineHeight;
    } else {
      line = test;
    }
  }
  ctx.fillText(line, x, y);
}

/* =========================
   ëŒ€ì‹œë³´ë“œ / ì¡±ë³´ / ê³µìœ 
========================= */
function renderDashboard(){
  let html =
    "<div class='bg-zinc-800 border border-zinc-700 rounded-xl p-6'>" +
      "<div class='flex items-start justify-between gap-3'>" +
        "<div class='min-w-0'>" +
          "<h2 class='text-lg font-bold text-amber-300 truncate'>ğŸ  " + escapeHtml(state.family) + "</h2>" +
          "<p class='text-sm text-zinc-300 mt-1'>ğŸ“– \"" + escapeHtml(state.motto) + "\"</p>" +
        "</div>" +
        "<div class='text-right text-sm text-zinc-300'>" +
          "<div>ğŸ‘¤ " + escapeHtml(state.current) + "</div>" +
          "<div class='text-zinc-400'>" + state.generation + "ëŒ€ Â· " + state.age + "ì„¸</div>" +
        "</div>" +
      "</div>" +
      "<div class='mt-4 flex flex-wrap gap-2 text-sm text-zinc-300'>" +
        "<span class='px-2 py-1 rounded bg-zinc-900 border border-zinc-700'>âš  ìœ„í—˜ë„ " + state.risk + "</span>" +
        "<span class='px-2 py-1 rounded bg-zinc-900 border border-zinc-700'>ğŸ“š ê¸°ë¡ " + state.genealogy.length + "ê±´</span>" +
      "</div>" +
      "<div class='mt-5 flex gap-2'>" +
        "<button id='btnNext' class='border border-zinc-600 px-4 py-2 rounded-lg hover:bg-zinc-700'>ì‚¬ê±´ ì§„í–‰</button>" +
        "<button id='btnCopy' class='border border-zinc-600 px-4 py-2 rounded-lg hover:bg-zinc-700'>ì¡±ë³´ ë³µì‚¬</button>" +
      "</div>" +
    "</div>" +
    "<div class='mt-6'>" +
      "<h3 class='text-amber-300 font-bold mb-2'>ì¡±ë³´</h3>" +
      "<div class='bg-zinc-800 border border-zinc-700 rounded-xl p-4 text-sm text-zinc-200 leading-relaxed max-h-[360px] overflow-auto' id='genealogyBox'>" +
        (state.genealogy.length ? renderGenealogyHtml() : "<span class='text-zinc-400'>ì•„ì§ ê¸°ë¡ì´ ì—†ë‹¤. ì‚¬ê±´ì„ ë§ì´í•˜ë¼.</span>") +
      "</div>" +
    "</div>";

  app.innerHTML = html;

  document.getElementById("btnNext").addEventListener("click", function(){ nextEvent(); });
  document.getElementById("btnCopy").addEventListener("click", function(){ shareGenealogy(true); });
}

function renderGenealogyHtml(){
  return state.genealogy.map(function(g){
    return "<div class='mb-2'><span class='text-zinc-400'>" + g.generation + "ëŒ€</span> " +
      "<b class='text-zinc-100'>" + escapeHtml(g.name) + "</b> â€” " +
      "<span class='text-zinc-200'>" + escapeHtml(g.choice) + "</span> " +
      "<span class='text-zinc-500'>â†’</span> " +
      "<span class='text-zinc-300'>" + escapeHtml(g.outcome) + "</span></div>";
  }).join("");
}

function shareGenealogy(forceCopy){
  if(!state) return alert("ì•„ì§ ê°€ë¬¸ì´ ì—†ë‹¤!");

  const lines = state.genealogy.map(function(g){
    return g.generation + "ëŒ€ " + g.name + ": " + g.choice + " â†’ " + g.outcome;
  }).join("\n");

  const text = "ğŸ“œ " + state.family + " ê°€ë¬¸ ì¡±ë³´\n" +
               "ê°€í›ˆ: " + state.motto + "\n\n" +
               lines;

  if (!forceCopy && navigator.share) {
    navigator.share({ title:"ê°€ë¬¸ ì¡±ë³´", text:text });
  } else {
    fallbackCopy(text);
  }
}

function fallbackCopy(text){
  // clipboardëŠ” íŒŒì¼:// ì—ì„œ ë§‰í ìˆ˜ ìˆìœ¼ë‹ˆ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬
  if (navigator.clipboard && window.isSecureContext) {
    navigator.clipboard.writeText(text).then(function(){
      alert("ë³µì‚¬ ì™„ë£Œ! ë¶™ì—¬ë„£ì–´ì„œ ê³µìœ í•˜ì‹œì˜¤! ã…‹ã…‹");
    }).catch(function(){
      prompt("ë³µì‚¬í•´ì„œ ê³µìœ í•˜ì‹œì˜¤ ã…‹ã…‹", text);
    });
  } else {
    prompt("ë³µì‚¬í•´ì„œ ê³µìœ í•˜ì‹œì˜¤ ã…‹ã…‹", text);
  }
}

/* =========================
   ìœ í‹¸: XSS ë°©ì§€
========================= */
function escapeHtml(s){
  return String(s)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll("\"","&quot;")
    .replaceAll("'","&#39;");
}
function escapeAttr(s){
  // value="" ì•ˆì— ë“¤ì–´ê°ˆ ë¬¸ìì—´ìš©
  return escapeHtml(s).replaceAll("\n"," ");
}

/* =========================
   ì´ˆê¸° ì‹¤í–‰
========================= */
if (!state) renderStart();
else renderDashboard();
</script>
</body>
</html>
